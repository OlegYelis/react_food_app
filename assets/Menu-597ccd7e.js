import{_ as W,a as U,n as q,i as N,b as P,t as H,f as G,r as L,g as $,s as J,c as X,d as S,S as Y,o as b,u as Z,p as ee,e as O,j as o,h as te,L as re,B as se,k as ne,H as M,l as ie,m as ae,q as ue,v as ce}from"./index-de233e50.js";import{$ as oe}from"./module-bd0efecc.js";var le=function(i){W(a,i);function a(n,t){var e;return e=i.call(this)||this,e.client=n,e.options=t,e.trackedProps=[],e.selectError=null,e.bindMethods(),e.setOptions(t),e}var r=a.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),A(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return I(this.currentQuery,this.options,this.options.refetchOnReconnect)},r.shouldFetchOnWindowFocus=function(){return I(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(t,e){var u=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(t),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=u.queryKey),this.updateQuery();var l=this.hasListeners();l&&B(this.currentQuery,s,this.options,u)&&this.executeFetch(),this.updateResult(e),l&&(this.currentQuery!==s||this.options.enabled!==u.enabled||this.options.staleTime!==u.staleTime)&&this.updateStaleTimeout();var c=this.computeRefetchInterval();l&&(this.currentQuery!==s||this.options.enabled!==u.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)},r.getOptimisticResult=function(t){var e=this.client.defaultQueryObserverOptions(t),u=this.client.getQueryCache().build(this.client,e);return this.createResult(u,e)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(t,e){var u=this,s={},l=function(h){u.trackedProps.includes(h)||u.trackedProps.push(h)};return Object.keys(t).forEach(function(c){Object.defineProperty(s,c,{configurable:!1,enumerable:!0,get:function(){return l(c),t[c]}})}),(e.useErrorBoundary||e.suspense)&&l("error"),s},r.getNextResult=function(t){var e=this;return new Promise(function(u,s){var l=e.subscribe(function(c){c.isFetching||(l(),c.isError&&(t!=null&&t.throwOnError)?s(c.error):u(c))})})},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(t){return this.fetch(U({},t,{meta:{refetchPage:t==null?void 0:t.refetchPage}}))},r.fetchOptimistic=function(t){var e=this,u=this.client.defaultQueryObserverOptions(t),s=this.client.getQueryCache().build(this.client,u);return s.fetch().then(function(){return e.createResult(s,u)})},r.fetch=function(t){var e=this;return this.executeFetch(t).then(function(){return e.updateResult(),e.currentResult})},r.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(q)),e},r.updateStaleTimeout=function(){var t=this;if(this.clearStaleTimeout(),!(N||this.currentResult.isStale||!P(this.options.staleTime))){var e=H(this.currentResult.dataUpdatedAt,this.options.staleTime),u=e+1;this.staleTimeoutId=setTimeout(function(){t.currentResult.isStale||t.updateResult()},u)}},r.computeRefetchInterval=function(){var t;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(t=this.options.refetchInterval)!=null?t:!1},r.updateRefetchInterval=function(t){var e=this;this.clearRefetchInterval(),this.currentRefetchInterval=t,!(N||this.options.enabled===!1||!P(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(e.options.refetchIntervalInBackground||G.isFocused())&&e.executeFetch()},this.currentRefetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(t,e){var u=this.currentQuery,s=this.options,l=this.currentResult,c=this.currentResultState,h=this.currentResultOptions,p=t!==u,m=p?t.state:this.currentQueryInitialState,g=p?this.currentResult:this.previousQueryResult,d=t.state,R=d.dataUpdatedAt,T=d.error,j=d.errorUpdatedAt,C=d.isFetching,f=d.status,w=!1,F=!1,v;if(e.optimisticResults){var k=this.hasListeners(),D=!k&&A(t,e),K=k&&B(t,u,e,s);(D||K)&&(C=!0,R||(f="loading"))}if(e.keepPreviousData&&!d.dataUpdateCount&&(g!=null&&g.isSuccess)&&f!=="error")v=g.data,R=g.dataUpdatedAt,f=g.status,w=!0;else if(e.select&&typeof d.data<"u")if(l&&d.data===(c==null?void 0:c.data)&&e.select===this.selectFn)v=this.selectResult;else try{this.selectFn=e.select,v=e.select(d.data),e.structuralSharing!==!1&&(v=L(l==null?void 0:l.data,v)),this.selectResult=v,this.selectError=null}catch(x){$().error(x),this.selectError=x}else v=d.data;if(typeof e.placeholderData<"u"&&typeof v>"u"&&(f==="loading"||f==="idle")){var y;if(l!=null&&l.isPlaceholderData&&e.placeholderData===(h==null?void 0:h.placeholderData))y=l.data;else if(y=typeof e.placeholderData=="function"?e.placeholderData():e.placeholderData,e.select&&typeof y<"u")try{y=e.select(y),e.structuralSharing!==!1&&(y=L(l==null?void 0:l.data,y)),this.selectError=null}catch(x){$().error(x),this.selectError=x}typeof y<"u"&&(f="success",v=y,F=!0)}this.selectError&&(T=this.selectError,v=this.selectResult,j=Date.now(),f="error");var V={status:f,isLoading:f==="loading",isSuccess:f==="success",isError:f==="error",isIdle:f==="idle",data:v,dataUpdatedAt:R,error:T,errorUpdatedAt:j,failureCount:d.fetchFailureCount,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>m.dataUpdateCount||d.errorUpdateCount>m.errorUpdateCount,isFetching:C,isRefetching:C&&f!=="loading",isLoadingError:f==="error"&&d.dataUpdatedAt===0,isPlaceholderData:F,isPreviousData:w,isRefetchError:f==="error"&&d.dataUpdatedAt!==0,isStale:E(t,e),refetch:this.refetch,remove:this.remove};return V},r.shouldNotifyListeners=function(t,e){if(!e)return!0;var u=this.options,s=u.notifyOnChangeProps,l=u.notifyOnChangePropsExclusions;if(!s&&!l||s==="tracked"&&!this.trackedProps.length)return!0;var c=s==="tracked"?this.trackedProps:s;return Object.keys(t).some(function(h){var p=h,m=t[p]!==e[p],g=c==null?void 0:c.some(function(R){return R===h}),d=l==null?void 0:l.some(function(R){return R===h});return m&&!d&&(!c||g)})},r.updateResult=function(t){var e=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!J(this.currentResult,e)){var u={cache:!0};(t==null?void 0:t.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,e)&&(u.listeners=!0),this.notify(U({},u,t))}},r.updateQuery=function(){var t=this.client.getQueryCache().build(this.client,this.options);if(t!==this.currentQuery){var e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))}},r.onQueryUpdate=function(t){var e={};t.type==="success"?e.onSuccess=!0:t.type==="error"&&!X(t.error)&&(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},r.notify=function(t){var e=this;S.batch(function(){t.onSuccess?(e.options.onSuccess==null||e.options.onSuccess(e.currentResult.data),e.options.onSettled==null||e.options.onSettled(e.currentResult.data,null)):t.onError&&(e.options.onError==null||e.options.onError(e.currentResult.error),e.options.onSettled==null||e.options.onSettled(void 0,e.currentResult.error)),t.listeners&&e.listeners.forEach(function(u){u(e.currentResult)}),t.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})})},a}(Y);function de(i,a){return a.enabled!==!1&&!i.state.dataUpdatedAt&&!(i.state.status==="error"&&a.retryOnMount===!1)}function A(i,a){return de(i,a)||i.state.dataUpdatedAt>0&&I(i,a,a.refetchOnMount)}function I(i,a,r){if(a.enabled!==!1){var n=typeof r=="function"?r(i):r;return n==="always"||n!==!1&&E(i,a)}return!1}function B(i,a,r,n){return r.enabled!==!1&&(i!==a||n.enabled===!1)&&(!r.suspense||i.state.status!=="error")&&E(i,r)}function E(i,a){return i.isStaleByTime(a.staleTime)}function he(){var i=!1;return{clearReset:function(){i=!1},reset:function(){i=!0},isReset:function(){return i}}}var fe=b.createContext(he()),pe=function(){return b.useContext(fe)};function ve(i,a,r){return typeof a=="function"?a.apply(void 0,r):typeof a=="boolean"?a:!!i}function _e(i,a){var r=b.useRef(!1),n=b.useState(0),t=n[1],e=Z(),u=pe(),s=e.defaultQueryObserverOptions(i);s.optimisticResults=!0,s.onError&&(s.onError=S.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=S.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=S.batchCalls(s.onSettled)),s.suspense&&(typeof s.staleTime!="number"&&(s.staleTime=1e3),s.cacheTime===0&&(s.cacheTime=1)),(s.suspense||s.useErrorBoundary)&&(u.isReset()||(s.retryOnMount=!1));var l=b.useState(function(){return new a(e,s)}),c=l[0],h=c.getOptimisticResult(s);if(b.useEffect(function(){r.current=!0,u.clearReset();var p=c.subscribe(S.batchCalls(function(){r.current&&t(function(m){return m+1})}));return c.updateResult(),function(){r.current=!1,p()}},[u,c]),b.useEffect(function(){c.setOptions(s,{listeners:!1})},[s,c]),s.suspense&&h.isLoading)throw c.fetchOptimistic(s).then(function(p){var m=p.data;s.onSuccess==null||s.onSuccess(m),s.onSettled==null||s.onSettled(m,null)}).catch(function(p){u.clearReset(),s.onError==null||s.onError(p),s.onSettled==null||s.onSettled(void 0,p)});if(h.isError&&!u.isReset()&&!h.isFetching&&ve(s.suspense,s.useErrorBoundary,[h.error,c.getCurrentQuery()]))throw h.error;return s.notifyOnChangeProps==="tracked"&&(h=c.trackResult(h,s)),h}function me(i,a,r){var n=ee(i,a,r);return _e(n,le)}const ye="_seacrh__icon_ze3mc_9",ge="_input_ze3mc_1",Re="_input__title_ze3mc_69",be="_invalid_ze3mc_77",Q={"input-wrapper":"_input-wrapper_ze3mc_1",seacrh__icon:ye,input:ge,input__title:Re,invalid:be},xe=O.forwardRef(function({className:a,isValid:r=!0,...n},t){return o.jsxs("div",{className:Q["input-wrapper"],children:[o.jsx("svg",{className:Q.seacrh__icon,width:"20px",height:"20px",children:o.jsx("use",{href:"./images/icons.svg#icon-search"})}),o.jsx("input",{...n,ref:t,className:`${a} ${Q.input}  ${!r&&Q.invalid}`})]})}),Se="_card_1o1ak_1",Qe="_card__top_1o1ak_29",Ce="_price_1o1ak_57",Oe="_addToCart_1o1ak_85",Ie="_addToCart__icon_1o1ak_99",Ee="_currency_1o1ak_107",Te="_rating_1o1ak_115",je="_rating__icon_1o1ak_149",we="_card__bottom_1o1ak_157",Fe="_title_1o1ak_165",ke="_description_1o1ak_183",_={card:Se,card__top:Qe,price:Ce,addToCart:Oe,addToCart__icon:Ie,currency:Ee,rating:Te,rating__icon:je,card__bottom:we,title:Fe,description:ke},Ue=i=>{const a=te(),n=i.description.map(e=>e.name).join(", "),t=e=>{e.preventDefault(),a(ne.add(i.id))};return o.jsxs(re,{to:`/product/${i.id}`,className:_.card,children:[o.jsxs("div",{className:_.card__top,style:{backgroundImage:`url('${i.image[1].lg}')`},children:[o.jsxs("p",{className:_.price,children:[i.price," ",o.jsx("span",{className:_.currency,children:"$"})]}),o.jsx(se,{className:_.addToCart,onClick:t,children:o.jsx("svg",{className:_.addToCart__icon,width:"20px",height:"20px",children:o.jsx("use",{href:"./images/icons.svg#icon-add_to_cart"})})}),o.jsxs("p",{className:_.rating,children:[i.rating," ",o.jsx("svg",{className:_.rating__icon,width:"15px",height:"15px",children:o.jsx("use",{href:"./images/icons.svg#icon-star"})})]})]}),o.jsxs("div",{className:_.card__bottom,children:[o.jsx("p",{className:_.title,children:i.name}),o.jsx("p",{className:_.description,children:n})]})]})},Ne="_wrapper_140pz_1",Pe={wrapper:Ne},Le=({products:i})=>o.jsx("div",{className:Pe.wrapper,children:i.map(a=>{const r=Math.random()*3+2,n=Math.round(r*10)/10;return o.jsx(Ue,{id:a.id,name:a.name,description:a.ingredients,image:a.images,price:a.price,rating:n},a.id)})}),$e="_head_2h2z4_1",Me="_menu__info_2h2z4_15",z={head:$e,menu__info:Me};async function Ae(i){const a=ie(ae,"burgers"),n=(await ue(ce(a,"/"))).val();return i?n.filter(e=>e.name.toLowerCase().includes(i.trim())||e.ingredients.some(u=>u.name.toLowerCase().includes(i.trim()))):n}const De=()=>{var l;const[i,a]=O.useState(),{data:r,isLoading:n,isError:t,error:e,refetch:u}=me("burgers",async()=>Ae(i));O.useEffect(()=>{u()},[i,u]);const s=c=>{a(c.target.value)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:z.head,children:[o.jsx(M,{children:"Menu"}),o.jsx(xe,{placeholder:"Seacrh ...",onChange:s})]}),t&&o.jsxs("p",{style:{color:"white"},children:[e.message,o.jsx("span",{style:{fontSize:"20px",fontWeight:"600",marginTop:"20px"},children:(l=e==null?void 0:e.response)==null?void 0:l.statusText})]}),!n&&!!(r!=null&&r.length)&&o.jsx(Le,{products:r}),n&&o.jsx(oe,{visible:!0,height:"80",width:"80",ariaLabel:"color-ring-loading",wrapperStyle:{},wrapperClass:"color-ring-wrapper",colors:["#e15b64","#f47e60","#f8b26a","#abbd81","#849b87"]}),!n&&(r==null?void 0:r.length)===0&&o.jsx(M,{className:z.menu__info,children:"No products were found for your request"})]})};export{De as default};
